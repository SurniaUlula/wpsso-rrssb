!function(t,e,i){"use strict";var s={calc:!1};e.fn.rrssb=function(t){var i=e.extend({description:void 0,emailAddress:void 0,emailBody:void 0,emailSubject:void 0,image:void 0,title:void 0,url:void 0},t);for(var s in i.emailSubject=i.emailSubject||i.title,i.emailBody=i.emailBody||(i.description?i.description:"")+(i.url?"\n\n"+i.url:""),i)i.hasOwnProperty(s)&&void 0!==i[s]&&(i[s]=a(i[s]));void 0!==i.url&&(e(this).find(".rrssb-facebook a").attr("href","https://www.facebook.com/sharer.php?u="+i.url),e(this).find(".rrssb-tumblr a").attr("href","http://tumblr.com/share/link?url="+i.url+(void 0!==i.title?"&name="+i.title:"")+(void 0!==i.description?"&description="+i.description:"")),e(this).find(".rrssb-linkedin a").attr("href","http://www.linkedin.com/shareArticle?mini=true&url="+i.url+(void 0!==i.title?"&title="+i.title:"")+(void 0!==i.description?"&summary="+i.description:"")),e(this).find(".rrssb-twitter a").attr("href","https://twitter.com/intent/tweet?text="+(void 0!==i.description?i.description:"")+"%20"+i.url),e(this).find(".rrssb-hackernews a").attr("href","https://news.ycombinator.com/submitlink?u="+i.url+(void 0!==i.title?"&text="+i.title:"")),e(this).find(".rrssb-vk a").attr("href","https://vk.com/share.php?url="+i.url),e(this).find(".rrssb-reddit a").attr("href","http://www.reddit.com/submit?url="+i.url+(void 0!==i.description?"&text="+i.description:"")+(void 0!==i.title?"&title="+i.title:"")),e(this).find(".rrssb-googleplus a").attr("href","https://plus.google.com/share?url="+i.url),e(this).find(".rrssb-pinterest a").attr("href","http://pinterest.com/pin/create/button/?url="+i.url+(void 0!==i.image?"&amp;media="+i.image:"")+(void 0!==i.description?"&description="+i.description:"")),e(this).find(".rrssb-pocket a").attr("href","https://getpocket.com/save?url="+i.url),e(this).find(".rrssb-github a").attr("href",i.url),e(this).find(".rrssb-print a").attr("href","javascript:window.print()"),e(this).find(".rrssb-whatsapp a").attr("href","whatsapp://send?text="+(void 0!==i.description?i.description+"%20":void 0!==i.title?i.title+"%20":"")+i.url)),(void 0!==i.emailAddress||i.emailSubject)&&e(this).find(".rrssb-email a").attr("href","mailto:"+(i.emailAddress?i.emailAddress:"")+"?"+(void 0!==i.emailSubject?"subject="+i.emailSubject:"")+(void 0!==i.emailBody?"&body="+i.emailBody:""))};var r,a=function(t){if(void 0!==t&&null!==t){if(null===t.match(/%[0-9a-f]{2}/i))return encodeURIComponent(t);t=decodeURIComponent(t),a(t)}},n=function(){e(".rrssb-buttons").each(function(t){var i=e(this),s=e("li:visible",i),r=100/s.length;s.css("width",r+"%").attr("data-initwidth",r)})},l=function(t){e(".rrssb-buttons").each(function(t){var i=e(this),s=e("li",i);e(s.get().reverse()).each(function(t,i){var r=e(this);if(!1===r.hasClass("small")&&parseFloat(r.attr("data-size"))+55>parseFloat(r.width())){var a=s.not(".small").last();e(a).addClass("small"),o()}--i||e(".rrssb-buttons").each(function(t){var i=e(this),s=e("li",i),r=s.filter(".small"),a=0,n=0,l=r.eq(0),d=parseFloat(l.attr("data-size"))+55,c=r.length;c===s.length?42*c+d<i.width()&&(i.removeClass("small-format"),r.eq(0).removeClass("small"),o()):(s.not(".small").each(function(t){var i=e(this),s=parseFloat(i.attr("data-size"))+55,r=parseFloat(i.width());a+=r,n+=s}),d<a-n&&(l.removeClass("small"),o()))})})}),!0===t&&c(o)},o=function(){e(".rrssb-buttons").each(function(t){var i,r,a,l,o,d=e(this),c=e("li",d),h=c.filter(".small"),m=h.length;m>0&&m!==c.length?(d.removeClass("small-format"),h.css("width","42px"),a=42*m,r=100/(i=c.not(".small").length),o=a/i,!1===s.calc?(l=(d.innerWidth()-1)/i-o,l=Math.floor(1e3*l)/1e3,l+="px"):l=s.calc+"("+r+"% - "+o+"px)",c.not(".small").css("width",l)):m===c.length?(d.addClass("small-format"),n()):(d.removeClass("small-format"),n())}),e(".rrssb-buttons").each(function(t){var i=e(this),s=i.width(),r=e("li",i).not(".small").eq(0).width(),a=e("li.small",i).length;if(r>170&&a<1){i.addClass("large-format");var n=r/12+"px";i.css("font-size",n)}else i.removeClass("large-format"),i.css("font-size","");s<25*a?i.removeClass("small-format").addClass("tiny-format"):i.removeClass("tiny-format")})},d=function(){e(".rrssb-buttons").each(function(t){e(this).addClass("rrssb-"+(t+1))}),function(){var t=e("<div>"),i=["calc","-webkit-calc","-moz-calc"];e("body").append(t);for(var r=0;r<i.length;r++)if(t.css("width",i[r]+"(1px)"),1===t.width()){s.calc=i[r];break}t.remove()}(),n(),e(".rrssb-buttons li .rrssb-text").each(function(t){var i=e(this),s=i.width();i.closest("li").attr("data-size",s)}),l(!0)},c=function(t){e(".rrssb-buttons li.small").removeClass("small"),l(),t()},h=function(){c(o),m(function(){c(o)},200,"finished resizing")},m=(r={},function(t,e,i){i||(i="Don't call this twice without a uniqueId"),r[i]&&clearTimeout(r[i]),r[i]=setTimeout(t,e)});e(document).ready(function(){try{e(document).on("click",".rrssb-buttons a.popup",{},function(i){var s=e(this);!function(e,i,s,r){var a=void 0!==t.screenLeft?t.screenLeft:screen.left,n=void 0!==t.screenTop?t.screenTop:screen.top,l=(t.innerWidth?t.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-s/2+a,o=(t.innerHeight?t.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/3-r/3+n,d=t.open(e,i,"scrollbars=yes, width="+s+", height="+r+", top="+o+", left="+l);d&&d.focus&&d.focus()}(s.attr("href").replace("/+/","/"),s.find(".rrssb-text").html(),580,470),i.preventDefault()})}catch(t){}h(),d()}),t.rrssbResize=h,t.rrssbInit=d}(window,jQuery);